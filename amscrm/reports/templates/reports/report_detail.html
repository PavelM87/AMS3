{% extends 'base.html' %}
{% load i18n %}
{% block title %}{% trans 'Отчет' %} № {{ report.idReport }}{% endblock title %}
{% block scripts %}

{% endblock scripts %}
{% block content %}
<section class="text-gray-600 body-font overflow-hidden">
  <div class="container px-5 py-24 mx-auto">
    <div class="lg:w-4/5 mx-auto flex flex-wrap">
      <div class="w-full lg:pr-10 lg:py-6 mb-6 lg:mb-0">
        <h2 class="text-sm title-font text-gray-500 tracking-widest">{% trans 'Отчет' %}</h2>
        <h1 class="text-gray-900 text-3xl title-font font-medium mb-4">{% trans 'Отчет' %} № {{ report.idReport }}</h1>
        <div class="flex mb-4">
          <a href="{% url 'reports:report-update' report.pk %}" class="flex-grow text-indigo-500 border-b-2 border-indigo-500 py-2 text-lg px-1">
            {% trans 'Редактировать' %}
          </a>
          <a href="#" class="flex-grow text-indigo-500 border-b-2 border-indigo-500 py-2 text-lg px-1">
            {% trans 'Генерировать отчет' %}
          </a>
        </div>
        <p class="mb-5 text-xl text-red-800">{% trans 'Отчет' %} № {{ report.idReport }}</p>
        <div class="flex border-b border-gray-300 py-2">
          <span class="text-gray-500">{% trans 'Год' %}</span>
          <span class="ml-auto text-gray-900">{{ report.reportYear }}</span>
        </div>
        <div class="flex border-b border-gray-300 py-2">
          <span class="text-gray-500">{% trans 'Дата произведения измерений' %}</span>
          <span class="ml-auto text-gray-900">{{ report.reportMeasuresDate }}</span>
        </div>
        <div class="flex border-b border-gray-300 py-2">
          <span class="text-gray-500">{% trans 'Объект' %}</span>
          <span class="ml-auto text-gray-900">{{ report.reportObject }}</span>
        </div>
          <div class="flex border-b border-gray-300 py-2">
          <span class="text-gray-500">{% trans 'Бригада' %}</span>
          <span class="ml-auto text-gray-900">{{ report.reportTeam }}</span>
        </div>
        <p class="mb-5 text-xl text-red-800">{% trans 'Погодные условия' %}</p>
        <div class="flex border-b border-gray-300 py-2">
          <span class="text-gray-500">{% trans 'Ветер' %}</span>
          <span class="ml-auto text-gray-900">{{ report.reportWind }}</span>
        </div>
        <div class="flex border-b mb-6 border-gray-300 py-2">
          <span class="text-gray-500">{% trans 'Погода' %}</span>
          <span class="ml-auto text-gray-900">{{ report.reportWeather }}</span>
        </div>
        <div class="flex border-b mb-6 border-gray-300 py-2">
          <span class="text-gray-500">{% trans 'Погода за три дня' %}</span>
          <span class="ml-auto text-gray-900">{{ report.reportWeather3 }}</span>
        </div>
        <div class="flex border-b mb-6 border-gray-300 py-2">
          <span class="text-gray-500">{% trans 'Грунт' %}</span>
          <span class="ml-auto text-gray-900">{{ report.reportSoil }}</span>
        </div>
        <div class="flex border-b mb-6 border-gray-300 py-2">
          <span class="text-gray-500">{% trans 'Температура' %}</span>
          <span class="ml-auto text-gray-900">{{ report.reportTemp }}</span>
        </div>
        <p class="mb-5 text-xl text-red-800">{% trans 'Инструменты измерений' %}</p>
        {% if equipment %}
          {% for eq in equipment %}
            <div class="flex border-b mb-6 border-gray-300 py-2">
              <span class="text-gray-500">{% trans 'Наименование' %}</span>
              <span class="ml-auto text-gray-900">{{ eq.equipName }}</span>
            </div>
            <div class="flex border-b mb-6 border-gray-300 py-2">
              <span class="text-gray-500">{% trans 'Заводской №'%}</span>
              <span class="ml-auto text-gray-900">{{ eq.equipNum }}</span>
            </div>
            <div class="flex border-b mb-6 border-gray-300 py-2">
              <span class="text-gray-500">{% trans 'Метрологический диапазон измерений' %}</span>
              <span class="ml-auto text-gray-900">{{ eq.equipRange }}</span>
            </div>
            <div class="flex border-b mb-6 border-gray-300 py-2">
              <span class="text-gray-500">{% trans 'Метрологическая основная погрешность' %}</span>
              <span class="ml-auto text-gray-900">{{ eq.equipError }}</span>
            </div>
            <div class="flex border-b mb-6 border-gray-300 py-2">
              <span class="text-gray-500">{% trans 'Дата поверки (предыдущей)' %}</span>
              <span class="ml-auto text-gray-900">{{ eq.equipDateCur }}</span>
            </div>
            <div class="flex border-b mb-6 border-gray-300 py-2">
              <span class="text-gray-500">{% trans 'Дата поверки (следующей)' %}</span>
              <span class="ml-auto text-gray-900">{{ eq.equipDateNext }}</span>
            </div>
            <div class="flex border-b mb-6 border-gray-300 py-2">
              <span class="text-gray-500">{% trans '№ свидетельства поверки' %}</span>
              <span class="ml-auto text-gray-900">{{ eq.equipDocNum }}</span>
            </div>
          {% endfor %}
        {% else %}
          <p>Отсутствует</p>
        {% endif %}
        <p class="mb-5 mt-5 text-xl text-red-800">{% trans 'Электротехнические измерения' %}</p>
        <div class="flex border-b mb-6 border-gray-300 py-2">
          <span class="text-gray-500">{% trans 'Питающее напряжение СОМ' %}</span>
          <span class="ml-auto text-gray-900">{{ report.reportElVoltage }}</span>
        </div>
        <div class="flex border-b mb-6 border-gray-300 py-2">
          <span class="text-gray-500">{% trans 'Марка кабеля СОМ (тип слева)' %}</span>
          <span class="ml-auto text-gray-900">{{ report.reportElCableL }}</span>
        </div>
        <div class="flex  border-b mb-6 border-gray-300 py-2">
          <span class="text-gray-500">{% trans 'Марка кабеля СОМ (сечение справа)' %}</span>
          <span class="ml-auto text-gray-900">{{ report.reportElCableR }}</span>
        </div>
        <div class="flex  border-b mb-6 border-gray-300 py-2">
          <span class="text-gray-500">{% trans 'Трос молниеприемника' %}</span>
          <span class="ml-auto text-gray-900">{{ report.reportElRope }}</span>
        </div>
        <div class="flex  border-b mb-6 border-gray-300 py-2">
          <span class="text-gray-500">{% trans 'Шина контура заземления' %}</span>
          <span class="ml-auto text-gray-900">{{ report.reportElBus }}</span>
        </div>
        <div class="flex  border-b mb-6 border-gray-300 py-2">
          <p class="mb-5 mt-5 text-xl text-red-800">{% trans 'Оборудование на АМС' %}</p>
          <div class="mt-7 ml-auto text-gray-900">
          <table class="mt-7 table form-table table-bordered table-sm">
            <thead class="text-center">
            <tr>
                <th>{% trans 'Тип' %}</th>
                <th>{% trans 'Высота' %}</th>
                <th>{% trans 'Размеры' %}</th>
                <th>{% trans 'Количество' %}</th>
                <th>{% trans 'Производитель' %}</th>
                <th>{% trans 'Модель' %}</th>
                <th>{% trans 'Оператор' %}</th>
                <th>{% trans 'Примечание' %}</th>
            </tr>
            </thead>
            <tbody>
            {% for eq in ams_equip %}
                <tr class="item">
                    <td>
                        {{ eq.eq_type }}
                    </td>
                    <td>
                        {{ eq.height }}
                    </td>
                    <td>
                      {{ eq.proportions }}
                    </td>
                    <td>
                      {{ eq.amount }}
                    </td>
                    <td>
                      {{ eq.manufacturer }}
                    </td>
                    <td>
                      {{ eq.model }}
                    </td>
                    <td>
                      {{ eq.operator }}
                    </td>
                    <td>
                      {{ eq.note }}
                    </td>
                </tr>
            {% endfor %}
            </tbody>
          </table>
          </div>
        </div>
        <p class="mb-5 mt-5 text-xl text-red-800">Результаты геодезических измерений: </p>
        <div style="display:flex; justify-content:space-around">
            <div>Стоянка А</div>
            <div>Стоянка В</div>
        </div>
        <div style="display:flex; justify-content:space-around">
            {% for res in result_data %}
            <table bgcolor="#ffcc00" class="mt-5 table form-table table-bordered table-sm">
                <tbody>
                    <tr>
                        <th>Расстояние:</th>
                        <td colspan="2">{{ res.distance }}</td>
                    </tr>
                    <tr>
                        <th>Высота</th>
                        <th>КЛ</th>
                        <th>КП</th>
                    </tr>
                    <tr>
                        <td rowspan="2">{{ res.height_1 }}</td>
                        <td>{{ res.c_left_1_0 }}</td>
                        <td>{{ res.c_right_1_0 }}</td>
                    </tr>
                    <tr>
                        <td>{{ res.c_left_1_1 }}</td>
                        <td>{{ res.c_right_1_1 }}</td>
                    </tr>
                    <tr>
                        <td rowspan="2">{{ res.height_2 }}</td>
                        <td>{{ res.c_left_2_0 }}</td>
                        <td>{{ res.c_right_2_0 }}</td>
                    </tr>
                    <tr>
                        <td>{{ res.c_left_2_1 }}</td>
                        <td>{{ res.c_right_2_1 }}</td>
                    </tr>
                    <tr>
                        <td rowspan="2">{{ res.height_3 }}</td>
                        <td>{{ res.c_left_3_0 }}</td>
                        <td>{{ res.c_right_3_0 }}</td>
                    </tr>
                    <tr>
                        <td>{{ res.c_left_3_1 }}</td>
                        <td>{{ res.c_right_3_1 }}</td>
                    </tr>
                    <tr>
                        <td rowspan="2">{{ res.height_4 }}</td>
                        <td>{{ res.c_left_4_0 }}</td>
                        <td>{{ res.c_right_4_0 }}</td>
                    </tr>
                    <tr>
                        <td>{{ res.c_left_4_1 }}</td>
                        <td>{{ res.c_right_4_1 }}</td>
                    </tr>
                    <tr>
                        <td rowspan="2">{{ res.height_5 }}</td>
                        <td>{{ res.c_left_5_0 }}</td>
                        <td>{{ res.c_right_5_0 }}</td>
                    </tr>
                    <tr>
                        <td>{{ res.c_left_5_1 }}</td>
                        <td>{{ res.c_right_5_1 }}</td>
                    </tr>
                </tbody>
            </table>
            {% endfor %}
        </div>          
        <div class="flex  border-b mb-6 border-gray-300 py-2">
          <p class="mb-5 mt-5 text-xl text-red-800">{% trans 'Схема АМС' %}</p>
          <span class="text-gray-500">{{ report.reportPDataAms }}</span>
        </div>

    </div>
    {% if form.errors or formset.errors %}
    {% for formset_error in formset.errors %}
      {{ formset_error }}
    {% endfor %}
    {% for form_error in form.errors %}
      {{ form_error }}
    {% endfor %}
  {% endif %}
  </div>
</section>
{% endblock content %}