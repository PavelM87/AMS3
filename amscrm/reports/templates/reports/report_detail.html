{% extends 'base.html' %}
{% block title %}Отчет № {{ report.idReport }}{% endblock title %}
{% block content %}
<section class="text-gray-600 body-font overflow-hidden">
  <div class="container px-5 py-24 mx-auto">
    <div class="lg:w-4/5 mx-auto flex flex-wrap">
      <div class="w-full lg:pr-10 lg:py-6 mb-6 lg:mb-0">
        <h2 class="text-sm title-font text-gray-500 tracking-widest">Отчет</h2>
        <h1 class="text-gray-900 text-3xl title-font font-medium mb-4">Отчет № {{ report.idReport }}</h1>
        <div class="flex mb-4">
          <a href="#" class="flex-grow text-indigo-500 border-b-2 border-indigo-500 py-2 text-lg px-1">
              Просмотр
          </a>
          <a href="{% url 'reports:report-update' report.pk %}" class="flex-grow text-indigo-500 border-b-2 border-indigo-500 py-2 text-lg px-1">
              Редактировать
          </a>
          <a href="#" class="flex-grow text-indigo-500 border-b-2 border-indigo-500 py-2 text-lg px-1">
              Генерировать pdf
          </a>
        </div>
        <p class="mb-5 text-xl text-red-800">Отчет № {{ report.idReport }}</p>
        <div class="flex border-b border-gray-300 py-2">
          <span class="text-gray-500">Год</span>
          <span class="ml-auto text-gray-900">{{ report.reportYear }}</span>
        </div>
        <div class="flex border-b border-gray-300 py-2">
          <span class="text-gray-500">Дата произведения измерений</span>
          <span class="ml-auto text-gray-900">{{ report.reportMeasuresDate }}</span>
        </div>
        <div class="flex border-b border-gray-300 py-2">
          <span class="text-gray-500">Объект</span>
          <span class="ml-auto text-gray-900">{{ report.reportObject }}</span>
        </div>
          <div class="flex border-b border-gray-300 py-2">
          <span class="text-gray-500">Бригада</span>
          <span class="ml-auto text-gray-900">{{ report.reportTeam }}</span>
        </div>
        <p class="mb-5 text-xl text-red-800">Погодные условия</p>
        <div class="flex border-b border-gray-300 py-2">
          <span class="text-gray-500">Ветер</span>
          <span class="ml-auto text-gray-900">{{ report.reportWind }}</span>
        </div>
        <div class="flex border-b mb-6 border-gray-300 py-2">
          <span class="text-gray-500">Погода в последние 3 дня</span>
          <span class="ml-auto text-gray-900">{{ report.reportWeather }}</span>
        </div>
        <div class="flex border-b mb-6 border-gray-300 py-2">
          <span class="text-gray-500">Погода за три дня</span>
          <span class="ml-auto text-gray-900">{{ report.reportWeather3 }}</span>
        </div>
        <div class="flex border-b mb-6 border-gray-300 py-2">
          <span class="text-gray-500">Грунт</span>
          <span class="ml-auto text-gray-900">{{ report.reportSoil }}</span>
        </div>
        <div class="flex border-b mb-6 border-gray-300 py-2">
          <span class="text-gray-500">Температура</span>
          <span class="ml-auto text-gray-900">{{ report.reportTemp }}</span>
        </div>
        <p class="mb-5 text-xl text-red-800">Инструменты измерений</p>
        {% if equipment %}
          {% for eq in equipment %}
            <div class="flex border-b mb-6 border-gray-300 py-2">
              <span class="text-gray-500">Наименование</span>
              <span class="ml-auto text-gray-900">{{ eq.equipName }}</span>
            </div>
            <div class="flex border-b mb-6 border-gray-300 py-2">
              <span class="text-gray-500">Заводской №</span>
              <span class="ml-auto text-gray-900">{{ eq.equipNum }}</span>
            </div>
            <div class="flex border-b mb-6 border-gray-300 py-2">
              <span class="text-gray-500">Метрологический диапазон измерений</span>
              <span class="ml-auto text-gray-900">{{ eq.equipRange }}</span>
            </div>
            <div class="flex border-b mb-6 border-gray-300 py-2">
              <span class="text-gray-500">Метрологическая основная погрешность</span>
              <span class="ml-auto text-gray-900">{{ eq.equipError }}</span>
            </div>
            <div class="flex border-b mb-6 border-gray-300 py-2">
              <span class="text-gray-500">Дата поверки (предыдущей)</span>
              <span class="ml-auto text-gray-900">{{ eq.equipDateCur }}</span>
            </div>
            <div class="flex border-b mb-6 border-gray-300 py-2">
              <span class="text-gray-500">Дата поверки (следующей)</span>
              <span class="ml-auto text-gray-900">{{ eq.equipDateNext }}</span>
            </div>
            <div class="flex border-b mb-6 border-gray-300 py-2">
              <span class="text-gray-500">№ свидетельства поверки</span>
              <span class="ml-auto text-gray-900">{{ eq.equipDocNum }}</span>
            </div>
          {% endfor %}
        {% else %}
          <p>Отсутствует</p>
        {% endif %}
        <p class="mb-5 mt-5 text-xl text-red-800">Электротехнические измерения</p>
        <div class="flex border-b mb-6 border-gray-300 py-2">
          <span class="text-gray-500">Питающее напряжение СОМ</span>
          <span class="ml-auto text-gray-900">{{ report.reportElVoltage }}</span>
        </div>
        <div class="flex border-b mb-6 border-gray-300 py-2">
          <span class="text-gray-500">Марка кабеля СОМ (тип слева)</span>
          <span class="ml-auto text-gray-900">{{ report.reportElCableL }}</span>
        </div>
        <div class="flex  border-b mb-6 border-gray-300 py-2">
          <span class="text-gray-500">Марка кабеля СОМ (сечение справа)</span>
          <span class="ml-auto text-gray-900">{{ report.reportElCableR }}</span>
        </div>
        <div class="flex  border-b mb-6 border-gray-300 py-2">
          <span class="text-gray-500">Молниеприемник – трос молниеприемника</span>
          <span class="ml-auto text-gray-900">{{ report.reportElRope }}</span>
        </div>
        <div class="flex  border-b mb-6 border-gray-300 py-2">
          <span class="text-gray-500">шина (проводник) контура заземления</span>
          <span class="ml-auto text-gray-900">{{ report.reportElBus }}</span>
        </div>
        <div class="flex  border-b mb-6 border-gray-300 py-2">
          <p class="mb-5 mt-5 text-xl text-red-800">Оборудование на АМС</p>
          <div class="mt-7 ml-auto text-gray-900">
          <table class="mt-7 table form-table table-bordered table-sm">
            <thead class="text-center">
            <tr>
                <th>Тип</th>
                <th>Высота</th>
                <th>Размеры</th>
                <th>Количество</th>
                <th>Производитель</th>
                <th>Модель</th>
                <th>Оператор</th>
                <th>Примечание</th>
            </tr>
            </thead>
            <tbody>
            {% for eq in ams_equip %}
                <tr class="item">
                    <td>
                        {{ eq.eq_type }}
                    </td>
                    <td>
                        {{ eq.height }}
                    </td>
                    <td>
                      {{ eq.proportions }}
                    </td>
                    <td>
                      {{ eq.amount }}
                    </td>
                    <td>
                      {{ eq.manufacturer }}
                    </td>
                    <td>
                      {{ eq.model }}
                    </td>
                    <td>
                      {{ eq.operator }}
                    </td>
                    <td>
                      {{ eq.note }}
                    </td>
                </tr>
            {% endfor %}
            </tbody>
          </table>
          </div>
        </div>
        <div class="flex  border-b mb-6 border-gray-300 py-2">
          <p class="mb-5 mt-5 text-xl text-red-800">Результаты геодезических измерений</p>
          <span class="text-gray-500">{{ report.reportPhotosRes }}</span>
        </div>
        <div class="flex  border-b mb-6 border-gray-300 py-2">
          <p class="mb-5 mt-5 text-xl text-red-800">Схема АМС</p>
          <span class="text-gray-500">{{ report.reportPDataAms }}</span>
        </div>

    </div>
    {% if form.errors or formset.errors %}
    {% for formset_error in formset.errors %}
      {{ formset_error }}
    {% endfor %}
    {% for form_error in form.errors %}
      {{ form_error }}
    {% endfor %}
  {% endif %}
  </div>
</section>
{% endblock content %}